{% extends "base.html"%} {% block title %}Liste réservations{% endblock %}
{% block nav %}{% include "navbar.html"%} {% endblock %}

{% block content %}

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<link href="{{ url_for('static', filename='reservation.css') }}" rel="stylesheet">

<div id="container">
    <h1>Liste Réservations</h1>
</div>
<div>
    <table class="table table-hover table-bordered">
        <thead>
        <tr style="background: #138fde;color: white;text-align: center;">
            <th scope="col">Reservation ID</th>
            <th>Prenom</th>
            <th>Nom</th>
            <th scope="col">Type ID</th>
            <th scope="col">Numero ID</th>
            <th scope="col">Date Reseravtion</th>
            <th scope="col" style="text-align: center;">Action</th>
        </tr>
        </thead>
        <tbody>
        {% for reservation in reservations%}

        <tr style="text-align: center;">
            <form action="{{ url_for('back_office.reservation_details')}}" method="post">
                <th scope="row"><input type="hidden" name="request_id" value="{{reservation.request_id}}">{{reservation.request_id}}
                </th>
                <td><input type="hidden" name="first_name" value="{{reservation.first_name}}">{{reservation.first_name}}
                </td>
                <td><input type="hidden" name="last_name" value="{{reservation.last_name}}">{{reservation.last_name}}
                </td>
                <td><input name="type_id" type="hidden" value="{{reservation.identification_type}}">{{reservation.identification_type}}
                </td>
                <td><input name="num_id" type="hidden" value="{{reservation.identification_num}}">{{reservation.identification_num}}
                </td>
                <td>{{reservation.date_reservation}}</td>
                <input type="hidden" name="montant" value="{{reservation.montant}}">
                <input type="hidden" name="dotation_code" value="{{reservation.dotation_code}}">
                <input type="hidden" name="dotation_libelle" value="{{reservation.dotation_libelle}}">

                {% if code == '0000' %}
                <td style="text-align: center;">

                    <button class="btn btn" style="background-color: #1c84c6;color:white;" type="submit">Régler
                        Reservation
                    </button>

                </td>
                {% endif %}
            </form>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $( document ).ready(function() {
        $("#details").css('display','none');
         var newUrl = "listreservation";
         history.pushState({}, null, newUrl);
    });
</script>


{% endblock %}

{% extends "base.html"%} {% block title %}Liste réservations{% endblock %}
 {% block nav %}{% include "navbar.html"%} {% endblock %}

{% block content %}

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<link href="{{ url_for('static', filename='reservation.css') }}" rel="stylesheet">

<div id="container">
    <h1>Liste Reservation</h1>
</div>
<div>
    <table class="table table-hover table-bordered">
        <thead>
        <tr style="background: #138fde;color: white;text-align: center;">
            <th scope="col">Reservation ID</th>
            <th>Prenom</th>
            <th>Nom</th>
            <th scope="col">Type ID</th>
            <th scope="col">Numero ID</th>
            <th scope="col">Date Reseravtion</th>
            <th scope="col" style="text-align: center;">Action</th>
        </tr>
        </thead>
        <tbody>
        {% for reservation in reservations%}

        <tr style="text-align: center;">
            <th scope="row">{{reservation.request_id}}</th>
            <td>{{reservation.first_name}}</td>
            <td>{{reservation.last_name}}</td>
            <td>{{reservation.identification_type}}</td>
            <td>{{reservation.identification_num}}</td>
            <td>{{reservation.date_reservation}}</td>

            {% if code == '0000' %}
            <td style="text-align: center;">
                <a href="{{ url_for('back_office.reservation_details',num_id=reservation.identification_num,type_id=reservation.identification_type, request_id=reservation.request_id,first_name=reservation.first_name,last_name=reservation.last_name,montant=reservation.montant,dotation_code=reservation.dotation_code,dotation_libelle=reservation.dotation_libelle)}}">
                    <button value="{{reservation.request_id}}" class="btn btn" style="background-color: #1c84c6;color:white;" type="submit">Régler
                        Reservation
                    </button>
                </a>

            </td>
            {% endif %}

        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
